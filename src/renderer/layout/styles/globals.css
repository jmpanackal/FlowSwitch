@custom-variant dark (&:is(.dark *));

:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.625rem;
  
  /* FlowSwitch Design System */
  --flow-bg-primary: oklch(0.08 0.02 240);
  --flow-bg-secondary: oklch(0.12 0.02 240);
  --flow-bg-tertiary: oklch(0.16 0.02 240);
  --flow-surface: oklch(0.14 0.02 240);
  --flow-surface-elevated: oklch(0.18 0.02 240);
  --flow-border: oklch(0.22 0.02 240);
  --flow-border-accent: oklch(0.35 0.08 240);
  --flow-text-primary: oklch(0.95 0.01 240);
  --flow-text-secondary: oklch(0.75 0.02 240);
  --flow-text-muted: oklch(0.55 0.02 240);
  --flow-accent-blue: oklch(0.65 0.15 240);
  --flow-accent-blue-hover: oklch(0.70 0.15 240);
  --flow-accent-green: oklch(0.65 0.15 140);
  --flow-accent-red: oklch(0.55 0.15 20);
  --flow-accent-purple: oklch(0.60 0.15 280);
  --flow-accent-purple-hover: oklch(0.65 0.15 280);
  --flow-shadow-sm: 0 2px 8px oklch(0.05 0.02 240 / 0.4);
  --flow-shadow-md: 0 4px 16px oklch(0.05 0.02 240 / 0.5);
  --flow-shadow-lg: 0 8px 32px oklch(0.05 0.02 240 / 0.6);
}

.dark {
  --background: var(--flow-bg-primary);
  --foreground: var(--flow-text-primary);
  --card: var(--flow-surface);
  --card-foreground: var(--flow-text-primary);
  --popover: var(--flow-surface-elevated);
  --popover-foreground: var(--flow-text-primary);
  --primary: var(--flow-accent-blue);
  --primary-foreground: var(--flow-text-primary);
  --secondary: var(--flow-surface);
  --secondary-foreground: var(--flow-text-secondary);
  --muted: var(--flow-surface);
  --muted-foreground: var(--flow-text-muted);
  --accent: var(--flow-accent-blue);
  --accent-foreground: var(--flow-text-primary);
  --destructive: var(--flow-accent-red);
  --destructive-foreground: var(--flow-text-primary);
  --border: var(--flow-border);
  --input: var(--flow-surface);
  --ring: var(--flow-accent-blue);
  --chart-1: var(--flow-accent-blue);
  --chart-2: var(--flow-accent-green);
  --chart-3: var(--flow-accent-purple);
  --chart-4: var(--flow-accent-red);
  --chart-5: oklch(0.7 0.15 60);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  
  /* Custom FlowSwitch Colors */
  --color-flow-bg-primary: var(--flow-bg-primary);
  --color-flow-bg-secondary: var(--flow-bg-secondary);
  --color-flow-bg-tertiary: var(--flow-bg-tertiary);
  --color-flow-surface: var(--flow-surface);
  --color-flow-surface-elevated: var(--flow-surface-elevated);
  --color-flow-border: var(--flow-border);
  --color-flow-border-accent: var(--flow-border-accent);
  --color-flow-text-primary: var(--flow-text-primary);
  --color-flow-text-secondary: var(--flow-text-secondary);
  --color-flow-text-muted: var(--flow-text-muted);
  --color-flow-accent-blue: var(--flow-accent-blue);
  --color-flow-accent-blue-hover: var(--flow-accent-blue-hover);
  --color-flow-accent-green: var(--flow-accent-green);
  --color-flow-accent-red: var(--flow-accent-red);
  --color-flow-accent-purple: var(--flow-accent-purple);
  --color-flow-accent-purple-hover: var(--flow-accent-purple-hover);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  
  body {
    @apply bg-flow-bg-primary text-flow-text-primary;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-feature-settings: 'cv11', 'ss01';
    font-variation-settings: 'opsz' 32;
  }
  
  /* Typography Scale */
  h1 { @apply text-2xl tracking-tight; font-weight: 700; }
  h2 { @apply text-xl tracking-tight; font-weight: 600; }
  h3 { @apply text-lg tracking-tight; font-weight: 600; }
  h4 { @apply text-base tracking-tight; font-weight: 600; }
  h5 { @apply text-sm tracking-tight; font-weight: 600; }
  h6 { @apply text-xs tracking-tight; font-weight: 600; }
}

@layer utilities {
  /* ENHANCED Monitor Layout System - FIXED for padding clipping */
  
  /* Main monitor layout container */
  .monitor-layout-container {
    position: relative;
    isolation: isolate;
    /* Allow overflow for selection highlights */
    overflow: visible;
  }
  
  /* Individual monitor container - outer wrapper */
  .monitor-container {
    position: relative;
    /* CRITICAL: Allow overflow so selection highlights can extend beyond */
    overflow: visible !important;
    /* Create stacking context */
    z-index: 1;
  }
  
  /* Monitor with selected apps gets elevated z-index */
  .monitor-container:has(.app-window.selected) {
    z-index: 10;
  }
  
  /* Monitor visual frame - handles the border and background */
  .monitor-frame {
    position: relative;
    width: 100%;
    height: 100%;
    /* Allow overflow for selection highlights */
    overflow: visible;
  }
  
  /* Monitor content area - where apps are positioned */
  .monitor-content {
    position: relative;
    width: 100%;
    height: 100%;
    /* Allow overflow for selection highlights */
    overflow: visible;
  }
  
  /* Monitor padding area - applies visual padding but allows overflow */
  .monitor-padded {
    /* Use margins instead of padding to avoid clipping */
    padding: 0;
    margin: 1rem;
    position: relative;
    width: calc(100% - 2rem);
    height: calc(100% - 2rem);
    /* CRITICAL: Must allow overflow */
    overflow: visible !important;
  }
  
  /* Alternative: Use clip-path instead of overflow hidden for monitor borders */
  .monitor-with-border {
    position: relative;
    /* Create visual border without affecting overflow */
    border: 2px solid var(--flow-border);
    border-radius: 0.75rem;
    /* Allow content to overflow the border for selection highlights */
    overflow: visible !important;
  }
  
  /* Responsive App Window Sizing */
  .app-window {
    container-type: size;
    container-name: app-container;
    position: absolute;
    /* Ensure app windows can extend beyond their normal bounds when selected */
    z-index: 5;
  }
  
  /* ENHANCED: Selected app windows with better overflow handling */
  .app-window.selected {
    /* Higher z-index to appear above other apps and monitor borders */
    z-index: 50 !important;
    
    /* CRITICAL: Extend beyond normal bounds to prevent clipping */
    /* Use negative margins to extend the interactive area */
    margin: -8px !important;
    /* Compensate with padding to maintain visual size */
    padding: 8px !important;
    
    /* Ensure the element can extend beyond parent boundaries */
    position: absolute !important;
  }
  
  /* ENHANCED: Selection highlight that extends beyond monitor padding */
  .app-window.selected::before {
    content: '';
    position: absolute;
    /* Extend well beyond the app window bounds */
    inset: -8px;
    border: 3px solid var(--flow-accent-blue);
    border-radius: calc(0.75rem + 8px);
    pointer-events: none;
    z-index: -1;
    background: transparent;
    /* Enhanced shadow for better visibility */
    box-shadow: 
      0 0 0 1px var(--flow-accent-blue-hover),
      0 0 20px oklch(0.65 0.15 240 / 0.4),
      0 8px 32px oklch(0.65 0.15 240 / 0.3);
  }
  
  /* ENHANCED: Action buttons with improved positioning */
  .app-window-actions {
    position: absolute;
    /* Position further outside to avoid any clipping */
    top: -12px;
    right: -12px;
    z-index: 100 !important;
    opacity: 0;
    transform: scale(0.8) translateY(4px);
    transition: all 0.2s ease-in-out;
    pointer-events: none;
  }
  
  /* Show actions on hover or selection */
  .app-window:hover .app-window-actions,
  .app-window.selected .app-window-actions {
    opacity: 1;
    transform: scale(1) translateY(0);
    pointer-events: auto;
  }
  
  /* Enhanced action button styling */
  .app-window-actions .action-button {
    @apply bg-flow-surface border border-flow-border rounded-lg p-1.5 shadow-lg;
    @apply hover:bg-flow-surface-elevated hover:border-flow-border-accent;
    @apply text-flow-text-secondary hover:text-flow-text-primary;
    backdrop-filter: blur(12px);
    /* Very high z-index to ensure visibility */
    z-index: 101 !important;
    /* Enhanced shadow for visibility */
    box-shadow: 
      0 4px 16px oklch(0.05 0.02 240 / 0.4),
      0 2px 8px oklch(0.05 0.02 240 / 0.2);
  }
  
  /* SPECIAL: Full-height app windows - extra handling */
  .app-window[data-full-height="true"].selected {
    /* Even more aggressive margins for full-height windows */
    margin: -12px !important;
    padding: 12px !important;
  }
  
  .app-window[data-full-height="true"].selected::before {
    /* Larger selection border for full-height windows */
    inset: -12px;
    border-width: 4px;
    border-radius: calc(0.75rem + 12px);
  }
  
  /* CRITICAL: Override any potential clipping from parent containers */
  .monitor-container *,
  .monitor-frame *,
  .monitor-content *,
  .monitor-padded * {
    /* Ensure no child elements clip the selection highlights */
    overflow: visible !important;
  }
  
  /* However, allow specific elements to have controlled overflow */
  .monitor-container .scroll-area,
  .monitor-container .scrollable,
  .monitor-container [data-scroll="true"] {
    overflow: auto !important;
  }
  
  /* ENHANCED Icon responsive sizing and centering - PROPERLY SCALES DOWN */
  .app-icon {
    @apply w-10 h-10;
    transition: all 0.2s ease-in-out;
    /* Ensure icon is perfectly centered */
    display: block;
    margin: 0 auto;
    flex-shrink: 0;
    /* Ensure proper sizing constraints */
    min-width: 16px;
    min-height: 16px;
    max-width: 40px;
    max-height: 40px;
  }
  
  .app-icon-fallback {
    @apply w-10 h-10;
    transition: all 0.2s ease-in-out;
    /* Ensure fallback icon is perfectly centered */
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    flex-shrink: 0;
    /* Ensure proper sizing constraints */
    min-width: 16px;
    min-height: 16px;
    max-width: 40px;
    max-height: 40px;
  }
  
  /* FIXED: App window content container - responsive padding with better centering */
  .app-window-content {
    position: absolute;
    inset: 4px; /* Smaller default padding */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    pointer-events: none;
    /* Ensure content stays within bounds */
    box-sizing: border-box;
    overflow: hidden;
    /* Smooth transitions for layout changes */
    transition: justify-content 0.2s ease-in-out;
  }
  
  /* When text is hidden, ensure perfect centering of icon */
  .app-window-content:has(.app-text-container[style*="opacity: 0"]) {
    justify-content: center !important;
  }
  
  /* FIXED: App icon container - responsive sizing */
  .app-icon-container {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-bottom: 4px; /* Smaller default margin */
    /* Ensure proper spacing for the larger icons */
    flex-shrink: 0;
    /* Create positioning context for content indicators */
    isolation: isolate;
    /* Ensure it doesn't grow beyond container */
    max-width: 100%;
    max-height: 70%; /* Leave room for text */
  }
  
  /* The actual app icon positioning within container */
  .app-icon-container .app-icon,
  .app-icon-container .app-icon-fallback {
    position: static;
    /* Icons should be static while the wrapper handles positioning */
  }
  
  /* Ensure the relative wrapper is properly sized and constrained */
  .app-icon-container > .relative {
    display: inline-block;
    position: relative;
    /* This creates the positioning context for content indicators */
    max-width: 100%;
    max-height: 100%;
  }
  
  /* FIXED: App text container - better sizing control and hidden state handling */
  .app-text-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    /* Ensure text doesn't overflow */
    max-height: 30%;
    overflow: hidden;
    /* Better text sizing */
    line-height: 1.1;
    /* Smooth transitions for showing/hiding */
    transition: opacity 0.2s ease-in-out, height 0.2s ease-in-out;
    /* Ensure proper space handling when hidden */
    flex-shrink: 1;
  }
  
  /* Text responsive visibility and sizing */
  .app-text {
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out, font-size 0.2s ease-in-out;
    /* Ensure text stays within bounds */
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  /* ENHANCED: More aggressive responsive behavior to prevent overlap */
  
  /* Large app windows - full display with generous spacing */
  @container app-container (min-width: 120px) and (min-height: 80px) {
    .app-window-content {
      inset: 8px;
    }
    
    .app-icon-container {
      margin-bottom: 8px;
      max-height: 60%; /* Leave plenty of room for text */
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-12 h-12;
    }
    
    .app-text {
      font-size: 12px;
    }
  }
  
  /* Medium-large app windows - still show text but smaller */
  @container app-container (max-width: 119px) and (min-width: 100px) and (min-height: 70px) {
    .app-window-content {
      inset: 6px;
    }
    
    .app-icon-container {
      margin-bottom: 6px;
      max-height: 65%;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-10 h-10;
    }
    
    .app-text {
      font-size: 11px;
    }
  }
  
  /* Medium app windows - compact text display */
  @container app-container (max-width: 99px) and (min-width: 90px) and (min-height: 65px) {
    .app-window-content {
      inset: 4px;
    }
    
    .app-icon-container {
      margin-bottom: 4px;
      max-height: 70%;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-9 h-9;
    }
    
    .app-text {
      font-size: 10px;
      line-height: 1;
    }
  }
  
  /* CRITICAL: Hide text early to prevent overlap - width-based */
  @container app-container (max-width: 89px) {
    .app-text-container {
      opacity: 0 !important;
      pointer-events: none;
      height: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    
    .app-icon-container {
      margin-bottom: 0;
      max-height: 100% !important;
      /* Center the icon perfectly when text is hidden */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .app-window-content {
      /* Remove bottom space since no text */
      justify-content: center;
    }
  }
  
  /* CRITICAL: Hide text early to prevent overlap - height-based */
  @container app-container (max-height: 64px) {
    .app-text-container {
      opacity: 0 !important;
      pointer-events: none;
      height: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    
    .app-icon-container {
      margin-bottom: 0;
      max-height: 100% !important;
      /* Center the icon perfectly when text is hidden */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .app-window-content {
      /* Remove bottom space since no text */
      justify-content: center;
    }
  }
  
  /* Large icon-only windows */
  @container app-container (max-width: 89px) and (min-width: 70px) and (min-height: 50px) {
    .app-window-content {
      inset: 4px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-10 h-10;
    }
  }
  
  /* Medium icon-only windows */
  @container app-container (max-width: 69px) and (min-width: 55px) and (min-height: 40px) {
    .app-window-content {
      inset: 3px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-8 h-8;
    }
  }
  
  /* Small icon-only windows */
  @container app-container (max-width: 54px) and (min-width: 45px) and (min-height: 35px) {
    .app-window-content {
      inset: 2px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-7 h-7;
    }
  }
  
  /* Very small icon-only windows */
  @container app-container (max-width: 44px) and (min-width: 35px) and (min-height: 25px) {
    .app-window-content {
      inset: 2px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-6 h-6;
    }
  }
  
  /* Tiny icon-only windows */
  @container app-container (max-width: 34px) and (min-width: 28px) and (min-height: 20px) {
    .app-window-content {
      inset: 1px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-5 h-5;
    }
  }
  
  /* Minimal icon-only windows - smallest recognizable size */
  @container app-container (max-width: 27px) {
    .app-window-content {
      inset: 1px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-4 h-4;
      min-width: 16px;
      min-height: 16px;
    }
  }
  
  /* Ultra short windows - height-based icon scaling */
  @container app-container (max-height: 24px) {
    .app-window-content {
      inset: 1px;
    }
    
    .app-icon,
    .app-icon-fallback {
      @apply w-4 h-4;
      min-width: 12px;
      min-height: 12px;
    }
  }
  
  /* ENHANCED: Content indicator responsive scaling - aligned with text hiding behavior */
  
  /* Large indicators for large windows */
  @container app-container (min-width: 120px) {
    .content-indicator {
      width: 24px !important;
      height: 24px !important;
      top: -9px !important;
      right: -9px !important;
      border-width: 2px;
      border-radius: 12px;
    }
    
    .content-indicator .count {
      font-size: 12px;
      font-weight: 700;
    }
  }
  
  /* Medium-large indicators */
  @container app-container (max-width: 119px) and (min-width: 100px) {
    .content-indicator {
      width: 22px !important;
      height: 22px !important;
      top: -8px !important;
      right: -8px !important;
      border-width: 2px;
      border-radius: 11px;
    }
    
    .content-indicator .count {
      font-size: 11px;
      font-weight: 700;
    }
  }
  
  /* Medium indicators */
  @container app-container (max-width: 99px) and (min-width: 90px) {
    .content-indicator {
      width: 20px !important;
      height: 20px !important;
      top: -7px !important;
      right: -7px !important;
      border-width: 2px;
      border-radius: 10px;
    }
    
    .content-indicator .count {
      font-size: 10px;
      font-weight: 700;
    }
  }
  
  /* Icon-only windows - large indicators */
  @container app-container (max-width: 89px) and (min-width: 70px) {
    .content-indicator {
      width: 18px !important;
      height: 18px !important;
      top: -6px !important;
      right: -6px !important;
      border-width: 2px;
      border-radius: 9px;
    }
    
    .content-indicator .count {
      font-size: 9px;
      font-weight: 700;
    }
  }
  
  /* Icon-only windows - medium indicators */
  @container app-container (max-width: 69px) and (min-width: 55px) {
    .content-indicator {
      width: 16px !important;
      height: 16px !important;
      top: -5px !important;
      right: -5px !important;
      border-width: 1px;
      border-radius: 8px;
    }
    
    .content-indicator .count {
      font-size: 8px;
      font-weight: 700;
    }
  }
  
  /* Icon-only windows - small indicators */
  @container app-container (max-width: 54px) and (min-width: 45px) {
    .content-indicator {
      width: 14px !important;
      height: 14px !important;
      top: -4px !important;
      right: -4px !important;
      border-width: 1px;
      border-radius: 7px;
    }
    
    .content-indicator .count {
      font-size: 7px;
      font-weight: 700;
    }
  }
  
  /* Icon-only windows - very small indicators */
  @container app-container (max-width: 44px) and (min-width: 35px) {
    .content-indicator {
      width: 12px !important;
      height: 12px !important;
      top: -3px !important;
      right: -3px !important;
      border-width: 1px;
      border-radius: 6px;
    }
    
    .content-indicator .count {
      font-size: 6px;
      font-weight: 600;
    }
  }
  
  /* Icon-only windows - tiny indicators */
  @container app-container (max-width: 34px) and (min-width: 28px) {
    .content-indicator {
      width: 10px !important;
      height: 10px !important;
      top: -2px !important;
      right: -2px !important;
      border-width: 1px;
      border-radius: 5px;
    }
    
    .content-indicator .count {
      font-size: 5px;
      font-weight: 600;
      line-height: 1;
    }
  }
  
  /* Minimal indicators - just a dot with number */
  @container app-container (max-width: 27px) {
    .content-indicator {
      width: 8px !important;
      height: 8px !important;
      top: -2px !important;
      right: -2px !important;
      border-width: 1px;
      border-radius: 4px;
    }
    
    .content-indicator .count {
      font-size: 4px;
      font-weight: 600;
      line-height: 1;
    }
  }
  
  /* Height-based indicator adjustments - when text is hidden due to height */
  @container app-container (max-height: 64px) and (min-height: 35px) {
    .content-indicator {
      width: 14px !important;
      height: 14px !important;
      top: -4px !important;
      right: -4px !important;
      border-width: 1px;
      border-radius: 7px;
    }
    
    .content-indicator .count {
      font-size: 7px;
      font-weight: 600;
    }
  }
  
  @container app-container (max-height: 34px) and (min-height: 25px) {
    .content-indicator {
      width: 12px !important;
      height: 12px !important;
      top: -3px !important;
      right: -3px !important;
      border-width: 1px;
      border-radius: 6px;
    }
    
    .content-indicator .count {
      font-size: 6px;
      font-weight: 600;
    }
  }
  
  @container app-container (max-height: 24px) {
    .content-indicator {
      width: 8px !important;
      height: 8px !important;
      top: -2px !important;
      right: -2px !important;
      border-width: 1px;
      border-radius: 4px;
    }
    
    .content-indicator .count {
      font-size: 4px;
      font-weight: 600;
      line-height: 1;
    }
  }
  
  /* FIXED: Content indicators - number-only notification bubbles in top-right */
  .content-indicator {
    position: absolute !important;
    top: -8px !important;
    right: -8px !important;
    bottom: auto !important;
    left: auto !important;
    width: 20px;
    height: 20px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 15;
    border: 2px solid white;
    box-shadow: 0 2px 8px oklch(0.05 0.02 240 / 0.5);
    backdrop-filter: blur(6px);
    transition: all 0.2s ease-in-out;
    pointer-events: auto;
    /* Center the number */
    flex-direction: row;
    gap: 0;
    /* Ensure it stays in top-right */
    transform: translateY(0) translateX(0);
    margin: 0;
  }
  
  /* Content indicator color coding based on content type */
  .content-indicator.content-file {
    /* Green for files */
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  }
  
  .content-indicator.content-folder {
    /* Yellow for folders */
    background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
  }
  
  .content-indicator.content-link {
    /* Blue for browser tabs/links */
    background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
  }
  
  .content-indicator.content-mixed {
    /* Red for mixed content types */
    background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
  }
  
  /* Content indicator count styling - number only */
  .content-indicator .count {
    font-size: 10px;
    font-weight: 700;
    color: white;
    line-height: 1;
    text-shadow: 0 1px 2px oklch(0.05 0.02 240 / 0.8);
    text-align: center;
    /* Remove any margins since we're centering in a circle */
    margin: 0;
  }
  
  /* Hover effects for content indicators */
  .app-icon-container:hover .content-indicator {
    transform: scale(1.1);
    box-shadow: 0 3px 8px oklch(0.05 0.02 240 / 0.4);
  }
  
  /* Legacy file count indicator (for backward compatibility) - TOP-RIGHT positioned (CORRECTED) */
  .file-indicator {
    @apply absolute min-w-4 h-4 px-1 flex items-center justify-center text-xs font-bold leading-none text-white rounded-full shadow-lg;
    top: -6px;
    right: -6px;
    background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
    border: 2px solid white;
    font-size: 8px;
    z-index: 20;
  }
  
  .file-indicator.folder-style {
    @apply rounded-sm;
    background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
  }
  
  .file-indicator.file-style {
    @apply rounded;
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  }
  
  /* ELEGANT SCROLLBARS - Minimalistic and Professional */
  
  /* Main scrollbar class for FlowSwitch components */
  .scrollbar-elegant {
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: var(--flow-border-accent) transparent;
  }
  
  /* Webkit browsers (Chrome, Safari, Edge) */
  .scrollbar-elegant::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-elegant::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }
  
  .scrollbar-elegant::-webkit-scrollbar-thumb {
    background: var(--flow-border);
    border-radius: 3px;
    transition: all 0.2s ease-in-out;
  }
  
  .scrollbar-elegant::-webkit-scrollbar-thumb:hover {
    background: var(--flow-border-accent);
  }
  
  .scrollbar-elegant::-webkit-scrollbar-thumb:active {
    background: var(--flow-accent-blue);
  }
  
  .scrollbar-elegant::-webkit-scrollbar-corner {
    background: transparent;
  }
  
  /* Enhanced scrollbar for content areas that need more visibility */
  .scrollbar-enhanced {
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: var(--flow-accent-blue) var(--flow-surface);
  }
  
  /* Webkit browsers (Chrome, Safari, Edge) */
  .scrollbar-enhanced::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .scrollbar-enhanced::-webkit-scrollbar-track {
    background: var(--flow-surface);
    border-radius: 4px;
    border: 1px solid var(--flow-border);
  }
  
  .scrollbar-enhanced::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--flow-accent-blue) 0%, var(--flow-accent-blue-hover) 100%);
    border-radius: 4px;
    border: 1px solid var(--flow-border);
    transition: all 0.2s ease-in-out;
  }
  
  .scrollbar-enhanced::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--flow-accent-blue-hover) 0%, var(--flow-accent-blue) 100%);
    box-shadow: 0 2px 8px var(--flow-accent-blue)/30;
  }
  
  .scrollbar-enhanced::-webkit-scrollbar-thumb:active {
    background: var(--flow-accent-blue);
    transform: scale(0.95);
  }
  
  .scrollbar-enhanced::-webkit-scrollbar-corner {
    background: var(--flow-surface);
    border: 1px solid var(--flow-border);
  }
  
  /* Invisible scrollbar for special cases */
  .scrollbar-hidden {
    /* Firefox */
    scrollbar-width: none;
  }
  
  /* Webkit browsers */
  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }
  
  /* Auto-hiding scrollbar that only appears on hover */
  .scrollbar-auto-hide {
    /* Firefox */
    scrollbar-width: none;
  }
  
  .scrollbar-auto-hide::-webkit-scrollbar {
    width: 6px;
    height: 6px;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }
  
  .scrollbar-auto-hide:hover::-webkit-scrollbar {
    opacity: 1;
  }
  
  .scrollbar-auto-hide::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-auto-hide::-webkit-scrollbar-thumb {
    background: var(--flow-border-accent);
    border-radius: 3px;
    transition: all 0.2s ease-in-out;
  }
  
  .scrollbar-auto-hide::-webkit-scrollbar-thumb:hover {
    background: var(--flow-accent-blue);
  }
  
  /* DEBUGGING: Highlight monitor boundaries (remove in production) */
  .debug-monitor-bounds .monitor-container {
    outline: 2px dashed red;
    outline-offset: -2px;
  }
  
  .debug-monitor-bounds .monitor-content {
    outline: 2px dashed blue;
    outline-offset: -4px;
  }
  
  .debug-monitor-bounds .app-window.selected {
    outline: 2px dashed green;
    outline-offset: 2px;
  }
}